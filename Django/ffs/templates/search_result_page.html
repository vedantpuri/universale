{% extends "base.html" %}

<!-- {% load static %} -->
{%block styles%}
<!-- Bootstrap core CSS -->
<link href="/static/css/search_result.min.css" rel="stylesheet">
<!-- Custom styles for this template -->
<link href="/static/css/search_result.css" rel="stylesheet">
<!-- Search icon logo -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">
{%endblock%}

{% load static from staticfiles %}

{%block content%}
    <div  style="min-height:610px">
    <div class="container">
      {% if results %}
      <div class="top-bar">
      <h2 class="my-4">Search Result: {{entered_text}}</h2>
      <br>
      {% for product in results %}
        <div class="row">
          <div class="col-md-7">
            <a href="#">
            {% if product.image %}
              <img class="img-fluid" src="{{product.image.url}}" alt="Responsive image">
            {% else %}
              <img class="img-fluid rounded mb-3 mb-md-0" src="{% static 'img/noimage.png' %}" alt="">
            {% endif %}
            </a>
          </div>
          <div class="col-md-5">
            <h5><i>{{ product.title }}</i></h5>
            <p>{{ product.description }}<br><br>
            Price: ${{ product.price }}<br>
            Seller Name: {{ product.owner.first_name }} {{ product.owner.last_name }}<br>
            Seller College: {{ product.owner.get_college_display }}<br>
            Seller Contact Email:   {{ product.owner.email }}<br>
            Status:  {{ product.get_status_display }}
            </p>
            <p>Rate this seller:
              <div class="rating">
                <span>☆</span>
                <span>☆</span>
                <span>☆</span>
                <span>☆</span>
                <span>☆</span>
              </div>
            </p>
            <p>
              <red>{{ product.flag_count }}</red>  User(s) flagged this item.
            </p>
            <form action="add/" method="post">
              <input type='hidden' name='product_title' value="{{ product.title }}"/>
              <button type='submit' class="btn btn-primary">Flag Item</button>
            </form>
            <form action="{% url 'alt_user' %}" method="get">
              <input type='hidden' name='user_obj' value="{{ product.owner.id }}"/>
              <button type='submit' class="btn btn-primary">View Seller</button>
            </form>
          </div>
        </div>
        <hr>
        {% endfor %}

      <!-- Pagination -->
      <ul class="pagination justify-content-center">
        <li class="page-item">
          <a class="page-link" href="#" aria-label="Previous">
            <span aria-hidden="true">&laquo;</span>
            <span class="sr-only">Previous</span>
          </a>
        </li>
        <li class="page-item">
          <a class="page-link" href="#">1</a>
        </li>
        <li class="page-item">
          <a class="page-link" href="#">2</a>
        </li>
        <li class="page-item">
          <a class="page-link" href="#">3</a>
        </li>
        <li class="page-item">
          <a class="page-link" href="#">4</a>
        </li>
        <li class="page-item">
          <a class="page-link" href="#" aria-label="Next">
            <span aria-hidden="true">&raquo;</span>
            <span class="sr-only">Next</span>
          </a>
        </li>
      </ul>
    </div>
  </div>
  {% else %}
    <br>
    <br>
    <br>
    <br>
    <h3>We couldn’t find any items matching "{{entered_text}}"</h3>
  {% endif %}
</div>
</div>
    <!-- /.container -->
{% endblock %}

{% block footer %}
<footer id="foot" class="py-5 bg-dark" style="position:static;bottom:0;width:100%">
{% endblock %}
